# Generated by Django 5.0.7 on 2025-12-20 07:37

import django.core.validators
import uuid
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AttendanceBreak',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('break_start', models.DateTimeField()),
                ('break_end', models.DateTimeField(blank=True, null=True)),
                ('break_type', models.CharField(choices=[('LUNCH', 'Lunch Break'), ('TEA', 'Tea Break'), ('PRAYER', 'Prayer Break'), ('PERSONAL', 'Personal Break'), ('MEDICAL', 'Medical Break'), ('SMOKING', 'Smoking Break'), ('OTHER', 'Other')], default='LUNCH', max_length=20)),
                ('location', models.CharField(blank=True, max_length=200)),
                ('notes', models.TextField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Attendance Break',
                'verbose_name_plural': 'Attendance Breaks',
                'ordering': ['break_start'],
            },
        ),
        migrations.CreateModel(
            name='AttendanceException',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('exception_date', models.DateField()),
                ('exception_type', models.CharField(choices=[('FORGOT_CLOCK_IN', 'Forgot to Clock In'), ('FORGOT_CLOCK_OUT', 'Forgot to Clock Out'), ('LATE_ARRIVAL', 'Late Arrival'), ('EARLY_DEPARTURE', 'Early Departure'), ('MISSED_DAY', 'Missed Day'), ('SYSTEM_ERROR', 'System Error'), ('DEVICE_ISSUE', 'Device Issue'), ('NETWORK_ISSUE', 'Network Issue'), ('WRONG_LOCATION', 'Wrong Location'), ('OTHER', 'Other')], max_length=20)),
                ('reason', models.TextField()),
                ('supporting_document', models.FileField(blank=True, null=True, upload_to='attendance_exceptions/%Y/%m/')),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=20)),
                ('proposed_clock_in', models.DateTimeField(blank=True, null=True)),
                ('proposed_clock_out', models.DateTimeField(blank=True, null=True)),
                ('proposed_status', models.CharField(blank=True, choices=[('PRESENT', 'Present'), ('ABSENT', 'Absent'), ('ON_LEAVE', 'On Leave'), ('HOLIDAY', 'Holiday'), ('LATE', 'Late'), ('HALF_DAY', 'Half Day'), ('PENDING', 'Pending'), ('WEEKEND', 'Weekend'), ('OVERTIME', 'Overtime'), ('SICK_LEAVE', 'Sick Leave'), ('UNAUTHORIZED', 'Unauthorized Absence'), ('WORK_FROM_HOME', 'Work From Home')], max_length=20, null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('review_comments', models.TextField(blank=True)),
                ('is_urgent', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Attendance Exception',
                'verbose_name_plural': 'Attendance Exceptions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AttendancePolicy',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField()),
                ('required_work_hours_per_day', models.DecimalField(decimal_places=2, default=Decimal('8.00'), max_digits=4)),
                ('required_work_days_per_week', models.PositiveIntegerField(default=5)),
                ('required_work_hours_per_week', models.DecimalField(decimal_places=2, default=Decimal('40.00'), max_digits=4)),
                ('overtime_allowed', models.BooleanField(default=True)),
                ('max_overtime_hours_per_day', models.DecimalField(decimal_places=2, default=Decimal('4.00'), max_digits=4)),
                ('max_overtime_hours_per_week', models.DecimalField(decimal_places=2, default=Decimal('12.00'), max_digits=4)),
                ('overtime_requires_approval', models.BooleanField(default=True)),
                ('late_arrival_grace_period', models.PositiveIntegerField(default=15, help_text='Minutes')),
                ('max_late_arrivals_per_month', models.PositiveIntegerField(default=3)),
                ('late_deduction_threshold_minutes', models.PositiveIntegerField(default=30)),
                ('max_unauthorized_absences_per_month', models.PositiveIntegerField(default=2)),
                ('consecutive_absences_trigger', models.PositiveIntegerField(default=3)),
                ('half_day_hours_threshold', models.DecimalField(decimal_places=2, default=Decimal('4.00'), max_digits=4)),
                ('mandatory_break_after_hours', models.DecimalField(decimal_places=1, default=Decimal('5.0'), max_digits=3)),
                ('min_break_duration_minutes', models.PositiveIntegerField(default=30)),
                ('remote_work_allowed', models.BooleanField(default=False)),
                ('requires_photo_verification', models.BooleanField(default=False)),
                ('requires_location_tracking', models.BooleanField(default=True)),
                ('disciplinary_action_threshold', models.PositiveIntegerField(default=5)),
                ('is_active', models.BooleanField(default=True)),
                ('effective_from', models.DateField()),
                ('effective_to', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Attendance Policies',
                'ordering': ['-effective_from'],
            },
        ),
        migrations.CreateModel(
            name='AttendanceRecord',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date', models.DateField(db_index=True)),
                ('status', models.CharField(choices=[('PRESENT', 'Present'), ('ABSENT', 'Absent'), ('ON_LEAVE', 'On Leave'), ('HOLIDAY', 'Holiday'), ('LATE', 'Late'), ('HALF_DAY', 'Half Day'), ('PENDING', 'Pending'), ('WEEKEND', 'Weekend'), ('OVERTIME', 'Overtime'), ('SICK_LEAVE', 'Sick Leave'), ('UNAUTHORIZED', 'Unauthorized Absence'), ('WORK_FROM_HOME', 'Work From Home')], default='PENDING', max_length=20)),
                ('clock_in', models.DateTimeField(blank=True, null=True)),
                ('clock_out', models.DateTimeField(blank=True, null=True)),
                ('total_break_minutes', models.PositiveIntegerField(default=0)),
                ('is_late', models.BooleanField(default=False)),
                ('late_minutes', models.PositiveIntegerField(default=0)),
                ('is_early_departure', models.BooleanField(default=False)),
                ('early_departure_minutes', models.PositiveIntegerField(default=0)),
                ('clock_in_location', models.CharField(blank=True, max_length=200)),
                ('clock_out_location', models.CharField(blank=True, max_length=200)),
                ('clock_in_latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('clock_in_longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('clock_out_latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('clock_out_longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('clock_in_ip', models.GenericIPAddressField(blank=True, null=True)),
                ('clock_out_ip', models.GenericIPAddressField(blank=True, null=True)),
                ('clock_in_device', models.CharField(blank=True, max_length=200)),
                ('clock_out_device', models.CharField(blank=True, max_length=200)),
                ('clock_in_user_agent', models.TextField(blank=True)),
                ('clock_out_user_agent', models.TextField(blank=True)),
                ('clock_in_photo', models.ImageField(blank=True, null=True, upload_to='attendance_photos/%Y/%m/')),
                ('clock_out_photo', models.ImageField(blank=True, null=True, upload_to='attendance_photos/%Y/%m/')),
                ('productive_hours', models.DecimalField(decimal_places=2, default=0, help_text='Self-reported productive hours', max_digits=4)),
                ('tasks_completed', models.PositiveIntegerField(default=0)),
                ('work_summary', models.TextField(blank=True, null=True)),
                ('work_quality_rating', models.PositiveIntegerField(default=0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)])),
                ('notes', models.TextField(blank=True, null=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('is_remote', models.BooleanField(default=False)),
                ('is_weekend_work', models.BooleanField(default=False)),
                ('is_public_holiday_work', models.BooleanField(default=False)),
                ('requires_verification', models.BooleanField(default=False)),
                ('is_verified', models.BooleanField(default=False)),
                ('is_manually_entered', models.BooleanField(default=False)),
                ('is_outside_geofence', models.BooleanField(default=False)),
                ('geofence_violation_distance', models.DecimalField(blank=True, decimal_places=2, help_text='Distance from allowed location in meters', max_digits=8, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Attendance Record',
                'verbose_name_plural': 'Attendance Records',
                'ordering': ['-date', 'employee'],
            },
        ),
        migrations.CreateModel(
            name='AttendanceSummary',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('month', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('year', models.PositiveIntegerField()),
                ('total_working_days', models.PositiveIntegerField(default=0)),
                ('present_days', models.PositiveIntegerField(default=0)),
                ('absent_days', models.PositiveIntegerField(default=0)),
                ('late_days', models.PositiveIntegerField(default=0)),
                ('half_days', models.PositiveIntegerField(default=0)),
                ('leave_days', models.PositiveIntegerField(default=0)),
                ('weekend_work_days', models.PositiveIntegerField(default=0)),
                ('holiday_work_days', models.PositiveIntegerField(default=0)),
                ('total_work_hours', models.DecimalField(decimal_places=2, default=0, max_digits=6)),
                ('total_overtime_hours', models.DecimalField(decimal_places=2, default=0, max_digits=6)),
                ('total_break_hours', models.DecimalField(decimal_places=2, default=0, max_digits=6)),
                ('total_late_minutes', models.PositiveIntegerField(default=0)),
                ('average_work_hours_per_day', models.DecimalField(decimal_places=2, default=0, max_digits=4)),
                ('attendance_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('punctuality_score', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('has_disciplinary_issues', models.BooleanField(default=False)),
                ('disciplinary_notes', models.TextField(blank=True)),
                ('generated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Attendance Summary',
                'verbose_name_plural': 'Attendance Summaries',
                'ordering': ['-year', '-month'],
            },
        ),
        migrations.CreateModel(
            name='PublicHoliday',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('date', models.DateField(db_index=True)),
                ('is_recurring', models.BooleanField(default=True, help_text='If True, holiday recurs annually on same date')),
                ('description', models.TextField(blank=True)),
                ('is_paid', models.BooleanField(default=True, help_text='If True, employees get paid for this holiday')),
                ('pay_multiplier', models.DecimalField(decimal_places=2, default=Decimal('2.5'), help_text='Pay multiplier if working on this holiday', max_digits=3)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Public Holiday',
                'verbose_name_plural': 'Public Holidays',
                'ordering': ['date'],
            },
        ),
        migrations.CreateModel(
            name='Shift',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=10, unique=True)),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('break_duration_minutes', models.PositiveIntegerField(default=60, help_text='Standard break duration in minutes (e.g., lunch break)')),
                ('has_paid_break', models.BooleanField(default=False)),
                ('grace_period_minutes', models.PositiveIntegerField(default=15, help_text='Minutes allowed after start time before marking late')),
                ('early_departure_grace_minutes', models.PositiveIntegerField(default=15, help_text='Minutes allowed before end time for early departure')),
                ('monday', models.BooleanField(default=True)),
                ('tuesday', models.BooleanField(default=True)),
                ('wednesday', models.BooleanField(default=True)),
                ('thursday', models.BooleanField(default=True)),
                ('friday', models.BooleanField(default=True)),
                ('saturday', models.BooleanField(default=False)),
                ('sunday', models.BooleanField(default=False)),
                ('overtime_threshold_minutes', models.PositiveIntegerField(default=30, help_text='Minutes after shift end before overtime kicks in')),
                ('overtime_multiplier', models.DecimalField(decimal_places=2, default=Decimal('1.5'), help_text='Overtime pay multiplier (e.g., 1.5 for time-and-a-half)', max_digits=3)),
                ('color_code', models.CharField(default='#3B82F6', help_text='Hex color code for shift display', max_length=7)),
                ('shift_type', models.CharField(choices=[('DAY', 'Day Shift'), ('NIGHT', 'Night Shift'), ('ROTATING', 'Rotating Shift'), ('SPLIT', 'Split Shift'), ('FLEXIBLE', 'Flexible Shift')], default='DAY', max_length=20)),
                ('allowed_locations', models.JSONField(blank=True, default=list)),
                ('requires_geofencing', models.BooleanField(default=False)),
                ('geofence_radius_meters', models.PositiveIntegerField(default=100)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Shift',
                'verbose_name_plural': 'Shifts',
                'ordering': ['start_time'],
            },
        ),
    ]
